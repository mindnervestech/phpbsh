angular.module("angular-flot",[]).constant("defaultOptions",{spline:{series:{lines:{show:!1},splines:{show:!0,tension:.4,lineWidth:2,fill:.8},points:{show:!0,radius:4}},grid:{borderColor:"#fafafa",borderWidth:1,hoverable:!0},tooltip:!0,tooltipOpts:{content:"%x : %y",defaultTheme:!1},xaxis:{tickColor:"#fafafa",mode:"categories"},yaxis:{tickColor:"#fafafa"},shadowSize:0},stack:{series:{shadowSize:0,stack:!0,bars:{show:!0,fill:!0,lineWidth:0,fillColor:{colors:[{opacity:.6},{opacity:.8}]},colors:["#428bca","#d9534f","#A40778"]}},bars:{align:"center",barWidth:.4},xaxis:{mode:"categories",font:{color:"#ccc"}},yaxis:{font:{color:"#ccc"}},grid:{hoverable:!0,clickable:!0,borderWidth:0,color:"#ccc"},tooltip:!0}}).directive("flot",["defaultOptions","$http",function(t,o){return{restrict:"EA",template:"<div></div>",scope:{dataset:"=dataset",options:"=options",callback:"=",type:"@",remote:"="},link:function(e,a,i){var n,s,r,l,c,d,p,f,h;if(c=null,p=i.width||"100%",n=i.height||"100%",(null!=(f=e.options)&&null!=(h=f.legend)?h.container:void 0)instanceof jQuery)throw'Please use a jQuery expression string with the "legend.container" option.';return e.dataset||(e.dataset=[]),e.options||e.type||(e.options={legend:{show:!1}}),d=$(a.children()[0]),d.css({width:p,height:n}),s=function(){var o;return o=!e.options&&e.type?$.plot(d,e.dataset,t[e.type]):$.plot(d,e.dataset,e.options),e.callback&&e.callback(o),o},r=function(t){return c?(c.setData(t),c.setupGrid(),c.draw()):c=s()},e.$watch("dataset",r,!0),l=function(){return c=s()},e.remote&&e.$watch("remote",function(){o({url:e.remote.url,params:e.remote.data,method:"GET"}).success(function(t){e.options=t.option,e.dataset=t.dataset}).error(function(){})}),e.$watch("options",l,!0)}}}]);