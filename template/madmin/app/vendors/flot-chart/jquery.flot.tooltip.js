!function(t){var e={tooltip:!1,tooltipOpts:{content:"%s | X: %x | Y: %y",xDateFormat:null,yDateFormat:null,monthNames:null,dayNames:null,shifts:{x:10,y:20},defaultTheme:!0,onHover:function(){}}},i=function(t){this.tipPosition={x:0,y:0},this.init(t)};i.prototype.init=function(e){function i(t){var e={};e.x=t.pageX,e.y=t.pageY,s.updateTooltipPosition(e)}function o(t,e,i){var o=s.getDomElement();if(i){var n;n=s.stringFormat(s.tooltipOptions.content,i),o.html(n),s.updateTooltipPosition({x:e.pageX,y:e.pageY}),o.css({left:s.tipPosition.x+s.tooltipOptions.shifts.x,top:s.tipPosition.y+s.tooltipOptions.shifts.y}).show(),"function"==typeof s.tooltipOptions.onHover&&s.tooltipOptions.onHover(i,o)}else o.hide().html("")}var s=this,n=t.plot.plugins.length;if(this.plotPlugins=[],n)for(var a=0;n>a;a++)this.plotPlugins.push(t.plot.plugins[a].name);e.hooks.bindEvents.push(function(e,n){if(s.plotOptions=e.getOptions(),s.plotOptions.tooltip!==!1&&"undefined"!=typeof s.plotOptions.tooltip){s.tooltipOptions=s.plotOptions.tooltipOpts;{s.getDomElement()}t(e.getPlaceholder()).bind("plothover",o),t(n).bind("mousemove",i)}}),e.hooks.shutdown.push(function(e,s){t(e.getPlaceholder()).unbind("plothover",o),t(s).unbind("mousemove",i)})},i.prototype.getDomElement=function(){var e;return t("#flotTip").length>0?e=t("#flotTip"):(e=t("<div />").attr("id","flotTip"),e.appendTo("body").hide().css({position:"absolute"}),this.tooltipOptions.defaultTheme&&e.css({background:"#fff","z-index":"1040",padding:"0.4em 0.6em","border-radius":"0.5em","font-size":"0.8em",border:"1px solid #111",display:"none","white-space":"nowrap"})),e},i.prototype.updateTooltipPosition=function(e){var i=t("#flotTip").outerWidth()+this.tooltipOptions.shifts.x,o=t("#flotTip").outerHeight()+this.tooltipOptions.shifts.y;e.x-t(window).scrollLeft()>t(window).innerWidth()-i&&(e.x-=i),e.y-t(window).scrollTop()>t(window).innerHeight()-o&&(e.y-=o),this.tipPosition.x=e.x,this.tipPosition.y=e.y},i.prototype.stringFormat=function(t,e){var i,o,s=/%p\.{0,1}(\d{0,})/,n=/%s/,a=/%lx/,p=/%ly/,r=/%x\.{0,1}(\d{0,})/,l=/%y\.{0,1}(\d{0,})/,d="%x",u="%y";if("undefined"!=typeof e.series.threshold?(i=e.datapoint[0],o=e.datapoint[1]):(i=e.series.data[e.dataIndex][0],o=e.series.data[e.dataIndex][1]),null===e.series.label&&e.series.originSeries&&(e.series.label=e.series.originSeries.label),"function"==typeof t&&(t=t(e.series.label,i,o,e)),"undefined"!=typeof e.series.percent&&(t=this.adjustValPrecision(s,t,e.series.percent)),t="undefined"!=typeof e.series.label?t.replace(n,e.series.label):t.replace(n,""),t=this.hasAxisLabel("xaxis",e)?t.replace(a,e.series.xaxis.options.axisLabel):t.replace(a,""),t=this.hasAxisLabel("yaxis",e)?t.replace(p,e.series.yaxis.options.axisLabel):t.replace(p,""),this.isTimeMode("xaxis",e)&&this.isXDateFormat(e)&&(t=t.replace(r,this.timestampToDate(i,this.tooltipOptions.xDateFormat))),this.isTimeMode("yaxis",e)&&this.isYDateFormat(e)&&(t=t.replace(l,this.timestampToDate(o,this.tooltipOptions.yDateFormat))),"number"==typeof i&&(t=this.adjustValPrecision(r,t,i)),"number"==typeof o&&(t=this.adjustValPrecision(l,t,o)),"undefined"!=typeof e.series.xaxis.ticks){var f;f=this.hasRotatedXAxisTicks(e)?"rotatedTicks":"ticks";var h=e.dataIndex+e.seriesIndex;e.series.xaxis[f].length>h&&!this.isTimeMode("xaxis",e)&&(t=t.replace(r,e.series.xaxis[f][h].label))}if("undefined"!=typeof e.series.yaxis.ticks)for(var c in e.series.yaxis.ticks)if(e.series.yaxis.ticks.hasOwnProperty(c)){var x=this.isCategoriesMode("yaxis",e)?e.series.yaxis.ticks[c].label:e.series.yaxis.ticks[c].v;x===o&&(t=t.replace(l,e.series.yaxis.ticks[c].label))}return"undefined"!=typeof e.series.xaxis.tickFormatter&&(t=t.replace(d,e.series.xaxis.tickFormatter(i,e.series.xaxis).replace(/\$/g,"$$"))),"undefined"!=typeof e.series.yaxis.tickFormatter&&(t=t.replace(u,e.series.yaxis.tickFormatter(o,e.series.yaxis).replace(/\$/g,"$$"))),t},i.prototype.isTimeMode=function(t,e){return"undefined"!=typeof e.series[t].options.mode&&"time"===e.series[t].options.mode},i.prototype.isXDateFormat=function(){return"undefined"!=typeof this.tooltipOptions.xDateFormat&&null!==this.tooltipOptions.xDateFormat},i.prototype.isYDateFormat=function(){return"undefined"!=typeof this.tooltipOptions.yDateFormat&&null!==this.tooltipOptions.yDateFormat},i.prototype.isCategoriesMode=function(t,e){return"undefined"!=typeof e.series[t].options.mode&&"categories"===e.series[t].options.mode},i.prototype.timestampToDate=function(e,i){var o=new Date(1*e);return t.plot.formatDate(o,i,this.tooltipOptions.monthNames,this.tooltipOptions.dayNames)},i.prototype.adjustValPrecision=function(t,e,i){var o,s=e.match(t);return null!==s&&""!==RegExp.$1&&(o=RegExp.$1,i=i.toFixed(o),e=e.replace(t,i)),e},i.prototype.hasAxisLabel=function(t,e){return-1!==this.plotPlugins.indexOf("axisLabels")&&"undefined"!=typeof e.series[t].options.axisLabel&&e.series[t].options.axisLabel.length>0},i.prototype.hasRotatedXAxisTicks=function(e){return 1===t.grep(t.plot.plugins,function(t){return"tickRotor"===t.name}).length&&"undefined"!==e.series.xaxis.rotatedTicks};var o=function(t){new i(t)};t.plot.plugins.push({init:o,options:e,name:"tooltip",version:"0.6.7"})}(jQuery);